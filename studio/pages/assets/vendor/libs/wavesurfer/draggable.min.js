function makeDraggable(v,m,l,p,s=3,a=0,E=100){if(!v)return()=>{};const L=matchMedia("(pointer: coarse)").matches;let g=()=>{};const e=e=>{if(e.button===a){e.preventDefault(),e.stopPropagation();let a=e.clientX,c=e.clientY,d=!1;const u=Date.now(),t=e=>{var t,n,o,r,i;e.preventDefault(),e.stopPropagation(),L&&Date.now()-u<E||(t=e.clientX,e=e.clientY,n=t-a,o=e-c,(d||Math.abs(n)>s||Math.abs(o)>s)&&({left:r,top:i}=v.getBoundingClientRect(),d||(null!=l&&l(a-r,c-i),d=!0),m(n,o,t-r,e-i),a=t,c=e))},n=e=>{var t,n,o;d&&(t=e.clientX,e=e.clientY,{left:n,top:o}=v.getBoundingClientRect(),null!=p&&p(t-n,e-o)),g()},o=e=>{e.relatedTarget&&e.relatedTarget!==document.documentElement||n(e)},r=e=>{d&&(e.stopPropagation(),e.preventDefault())},i=e=>{d&&e.preventDefault()};document.addEventListener("pointermove",t),document.addEventListener("pointerup",n),document.addEventListener("pointerout",o),document.addEventListener("pointercancel",o),document.addEventListener("touchmove",i,{passive:!1}),document.addEventListener("click",r,{capture:!0}),g=()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n),document.removeEventListener("pointerout",o),document.removeEventListener("pointercancel",o),document.removeEventListener("touchmove",i),setTimeout(()=>{document.removeEventListener("click",r,{capture:!0})},10)}}};return v.addEventListener("pointerdown",e),()=>{g(),v.removeEventListener("pointerdown",e)}}export{makeDraggable};